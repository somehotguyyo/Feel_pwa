<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>feel Â· é€‰ä½ çš„é¥­</title>

  <style>
    :root{
      --bg:#f5f5f7;
      --card:rgba(255,255,255,.92);
      --stroke:rgba(0,0,0,.08);
      --text:#111;
      --muted:#6e6e73;
      --shadow:0 10px 30px rgba(0,0,0,.08);
      --shadow2:0 2px 10px rgba(0,0,0,.06);
      --radius:24px;
      --pad:18px;
      --ease:cubic-bezier(.2,.9,.2,1);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",
        "PingFang SC","Hiragino Sans GB","Microsoft YaHei","Segoe UI",Roboto,Arial,sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* Subtle moving background (very light) */
    .bgGlow{
      position:fixed; inset:-40vh -30vw auto -30vw;
      height:80vh;
      background:
        radial-gradient(closest-side, rgba(0,0,0,.06), rgba(0,0,0,0)),
        radial-gradient(closest-side, rgba(0,0,0,.04), rgba(0,0,0,0));
      filter: blur(22px);
      opacity:.55;
      pointer-events:none;
      transform: translate3d(0,0,0);
      animation: floatGlow 10s var(--ease) infinite alternate;
    }
    @keyframes floatGlow{
      0%{ transform: translate3d(-2%, -2%, 0) }
      100%{ transform: translate3d(2%, 2%, 0) }
    }

    .wrap{
      max-width:860px;
      margin:0 auto;
      padding:24px var(--pad) 118px;
      position:relative;
    }

    /* Header */
    .header{
      margin-bottom: 10px;
      animation: fadeUp .55s var(--ease) both;
    }

    /* Handwritten title font stack (iOS friendly) */
    .title{
      margin:0;
      font-size:26px;
      line-height:1.05;
      letter-spacing:-0.01em;
      font-weight:700;
      font-family:
        "Snell Roundhand","Bradley Hand","Apple Chancery",
        "Comic Sans MS", /* last resort */
        cursive;
    }

    /* Make the rest feel crisp & â€œtool-likeâ€ */
    .sub{
      margin-top:10px;
      font-size:15px;
      color:var(--muted);
      line-height:1.55;
      letter-spacing:-0.01em;
      font-weight:520;
      animation: fadeUp .55s var(--ease) .06s both;
    }

    /* Home grid */
    .homeGrid{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:16px;
    }
    /* Make the last card centered if odd count */
    .homeGrid .stateBtn:last-child{
      grid-column: 1 / -1;
      max-width: 420px;
      justify-self:center;
      width: 100%;
    }

    .stateBtn{
      border:1px solid rgba(255,255,255,.55);
      background:var(--card);
      border-radius:var(--radius);
      padding:18px 14px 16px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      box-shadow: var(--shadow2);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      transform: translateY(14px);
      opacity:0;
      animation: popIn .55s var(--ease) both;
      transition: transform .18s var(--ease), box-shadow .18s var(--ease), filter .18s var(--ease), opacity .18s var(--ease);
      will-change: transform;
    }
    .stateBtn:nth-child(1){ animation-delay:.06s }
    .stateBtn:nth-child(2){ animation-delay:.10s }
    .stateBtn:nth-child(3){ animation-delay:.14s }
    .stateBtn:nth-child(4){ animation-delay:.18s }
    .stateBtn:nth-child(5){ animation-delay:.22s }

    @keyframes popIn{
      0%{ transform: translateY(14px); opacity:0 }
      100%{ transform: translateY(0); opacity:1 }
    }
    @keyframes fadeUp{
      0%{ transform: translateY(10px); opacity:0 }
      100%{ transform: translateY(0); opacity:1 }
    }

    /* Press feels like iOS: lift, not shrink */
    .stateBtn:active{
      transform: translateY(-2px);
      box-shadow: 0 14px 34px rgba(0,0,0,.12);
      filter: saturate(1.05);
    }

    .iconCircle{
      width:58px; height:58px; border-radius:999px;
      display:flex; align-items:center; justify-content:center;
      font-size:26px;
      background: rgba(0,0,0,.04);
      border: 1px solid rgba(0,0,0,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.9);
      position:relative;
      overflow:hidden;
    }
    /* Tiny shine sweep on icons (subtle) */
    .iconCircle::after{
      content:"";
      position:absolute; inset:-40% -60%;
      background: linear-gradient(120deg, rgba(255,255,255,0), rgba(255,255,255,.55), rgba(255,255,255,0));
      transform: translateX(-40%) rotate(8deg);
      opacity:.35;
      animation: sweep 3.8s var(--ease) infinite;
    }
    @keyframes sweep{
      0%,55%{ transform: translateX(-55%) rotate(8deg); opacity:0 }
      70%{ opacity:.32 }
      100%{ transform: translateX(45%) rotate(8deg); opacity:0 }
    }

    /* Card text font: softer but still modern */
    .stateText{
      font-size:14.5px;
      font-weight:650;
      letter-spacing:-0.01em;
      color: rgba(0,0,0,.86);
      font-family:
        -apple-system,BlinkMacSystemFont,
        "SF Pro Display","SF Pro Text",
        "PingFang SC","Hiragino Sans GB","Microsoft YaHei",
        "Segoe UI",Roboto,Arial,sans-serif;
    }

    .hint{
      margin-top:14px;
      font-size:12px;
      color: rgba(0,0,0,.40);
      line-height:1.45;
      animation: fadeUp .55s var(--ease) .14s both;
    }

    /* Result */
    .navRow{
      display:flex;
      gap:10px;
      margin: 4px 0 12px;
      animation: fadeUp .45s var(--ease) both;
    }
    .pill{
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      border-radius:999px;
      padding:10px 12px;
      font-size:13px;
      font-weight:700;
      color: rgba(0,0,0,.75);
      transition: transform .12s var(--ease);
    }
    .pill:active{ transform: translateY(-1px); }

    .card{
      border: 1px solid rgba(255,255,255,.55);
      background: var(--card);
      border-radius: 28px;
      padding: 18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(18px) saturate(180%);
      -webkit-backdrop-filter: blur(18px) saturate(180%);
      transform-origin: 50% 10%;
      animation: cardIn .55s var(--ease) both;
    }
    @keyframes cardIn{
      0%{ transform: translateY(14px) scale(.99); opacity:0 }
      100%{ transform: translateY(0) scale(1); opacity:1 }
    }

    .accent{
      height:10px; border-radius:999px;
      background: linear-gradient(90deg, rgba(0,0,0,.15), rgba(0,0,0,0));
      margin-bottom: 14px;
      position:relative;
      overflow:hidden;
    }
    /* Accent shimmer */
    .accent::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,.55), rgba(255,255,255,0));
      transform: translateX(-60%);
      opacity:.22;
      animation: accentSweep 2.6s var(--ease) infinite;
    }
    @keyframes accentSweep{
      0%,55%{ transform: translateX(-65%); opacity:0 }
      75%{ opacity:.22 }
      100%{ transform: translateX(65%); opacity:0 }
    }

    .stateTitle{
      font-size:22px;
      font-weight:850;
      letter-spacing:-0.02em;
      margin: 4px 0 10px;
    }

    .decide{
      white-space: pre-line;
      font-size: 17px;
      line-height: 1.7;
      letter-spacing: -0.01em;
      color: rgba(0,0,0,.86);
    }

    .divider{
      height:1px;
      background: rgba(0,0,0,.08);
      margin: 16px 0;
    }

    .label{
      font-size: 12px;
      color: rgba(0,0,0,.50);
      font-weight: 850;
      letter-spacing: .16em;
      text-transform: uppercase;
    }

    .pick{
      margin-top: 10px;
      font-size: 22px;
      font-weight: 850;
      letter-spacing: -0.02em;
      line-height: 1.25;
      animation: fadeUp .35s var(--ease) both;
    }

    .meta{
      margin-top: 8px;
      font-size: 13px;
      color: rgba(0,0,0,.55);
      line-height: 1.5;
      animation: fadeUp .35s var(--ease) .04s both;
    }

    .module{
      margin-top: 14px;
      padding: 14px;
      border-radius: 18px;
      background: rgba(0,0,0,.04);
      border: 1px solid rgba(0,0,0,.05);
      animation: fadeUp .35s var(--ease) .06s both;
    }
    .moduleTitle{
      font-size: 12px;
      color: rgba(0,0,0,.50);
      font-weight: 850;
      letter-spacing: .12em;
      text-transform: uppercase;
    }
    .moduleBody{
      margin-top: 8px;
      font-size: 14px;
      color: rgba(0,0,0,.82);
      line-height: 1.55;
      font-weight: 650;
      letter-spacing: -0.01em;
    }

    /* Sticky action bar */
    .sticky{
      position:fixed; left:0; right:0; bottom:0;
      padding: 10px 12px 12px;
      border-top:1px solid rgba(0,0,0,.08);
      background: rgba(245,245,247,.78);
      backdrop-filter: blur(18px) saturate(180%);
      -webkit-backdrop-filter: blur(18px) saturate(180%);
    }
    .stickyInner{
      max-width:860px;
      margin:0 auto;
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      padding: 0 var(--pad);
    }

    .action{
      border-radius: 999px;
      padding: 12px 14px;
      font-size: 14px;
      font-weight: 850;
      border: 1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.85);
      box-shadow: 0 2px 10px rgba(0,0,0,.06);
      transition: transform .12s var(--ease), box-shadow .12s var(--ease);
    }
    .action:active{
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(0,0,0,.10);
    }
    .action.primary{
      border-color: rgba(0,0,0,.88);
      background: rgba(0,0,0,.92);
      color:#fff;
      box-shadow: 0 10px 26px rgba(0,0,0,.20);
    }
    .action.ghost{
      background: rgba(255,255,255,.72);
      color: rgba(0,0,0,.78);
    }

    /* Selection focus effect: when choosing a state, others fade slightly */
    .dimmed{ opacity:.60; }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce){
      .bgGlow, .iconCircle::after, .accent::after { animation: none !important; }
      .stateBtn, .header, .sub, .hint, .card, .pick, .meta, .module, .navRow { animation: none !important; opacity:1 !important; transform:none !important; }
      .stateBtn:active, .pill:active, .action:active { transform:none !important; }
    }
  </style>
</head>

<body>
  <div class="bgGlow"></div>

  <div class="wrap">
    <!-- HOME -->
    <section id="home">
      <div class="header">
        <h1 class="title">è¯´ä½ çš„ feelï¼Œé€‰ä½ çš„é¥­</h1>
        <div class="sub">ä¸ç”¨æƒ³ã€‚æˆ‘æ›¿ä½ åšä¸€ä¸ªä¸åæ‚”çš„å†³å®šã€‚</div>
      </div>

      <div class="homeGrid">
        <button class="stateBtn" data-state="tired">
          <div class="iconCircle">ğŸ˜®â€ğŸ’¨</div>
          <div class="stateText">ç´¯</div>
        </button>

        <button class="stateBtn" data-state="sad">
          <div class="iconCircle">â˜¹ï¸</div>
          <div class="stateText">å¿ƒæƒ…ä¸å¥½</div>
        </button>

        <button class="stateBtn" data-state="reward">
          <div class="iconCircle">ğŸ˜Œ</div>
          <div class="stateText">æƒ³å¥–åŠ±è‡ªå·±</div>
        </button>

        <button class="stateBtn" data-state="rush">
          <div class="iconCircle">ğŸ•™</div>
          <div class="stateText">èµ¶æ—¶é—´</div>
        </button>

        <button class="stateBtn" data-state="decide">
          <div class="iconCircle">ğŸ¤”</div>
          <div class="stateText">ä½ æ¥å†³å®š</div>
        </button>
      </div>

      <div class="hint">V1ï¼šå…ˆæŠŠâ€œå†³å®šâ€å’Œâ€œå¯ä¿¡åº¦â€åšå¯¹ï¼›èªæ˜å’Œä¸ªæ€§åŒ–ç•™åˆ°åæœŸã€‚</div>
    </section>

    <!-- RESULT -->
    <section id="result" style="display:none;">
      <div class="navRow">
        <button class="pill" id="homeBtn">â† å›é¦–é¡µ</button>
      </div>

      <div class="card" id="resultCard">
        <div class="accent" id="accentBar"></div>

        <div class="stateTitle" id="stateTitle"></div>
        <div class="decide" id="decideText"></div>

        <div class="divider"></div>

        <div class="label">ä»Šå¤©å°±ç‚¹è¿™ä¸ª</div>
        <div class="pick" id="pickText"></div>
        <div class="meta" id="pickMeta"></div>

        <div class="module">
          <div class="moduleTitle" id="moduleTitle"></div>
          <div class="moduleBody" id="moduleBody"></div>
        </div>
      </div>
    </section>
  </div>

  <!-- Sticky action bar -->
  <div class="sticky" id="stickyBar" style="display:none;">
    <div class="stickyInner">
      <button class="action primary" id="goBtn">å»ç‚¹å¤–å–</button>
      <button class="action" id="swapBtn">æ¢ä¸€ä¸ª</button>
      <button class="action ghost" id="againBtn">æ¢ä¸ªçŠ¶æ€</button>
    </div>
  </div>

<script>
  const DATA = {
    tired: {
      title: "ğŸ˜®â€ğŸ’¨ ç´¯",
      accent: "linear-gradient(90deg, rgba(0,0,0,.18), rgba(0,0,0,0))",
      decide: "ç°åœ¨è¿™ç§æƒ…å†µï¼Œ\nç›´æ¥åƒä¸€ä»½çƒ­çš„ã€æœ‰è›‹ç™½çš„ä¸»é£Ÿã€‚\n\nä¸åˆºæ¿€ï¼Œèƒ½æ¢å¤ä½“åŠ›ï¼Œ\nåƒå®ŒçŠ¶æ€ä¼šæ…¢æ…¢å›æ¥ã€‚",
      moduleTitle: "è¡¥èƒ½æ­é…",
      moduleBody: "ä»ã€Œå¤è›‹ / ç…è›‹ / å°èœã€é‡Œéšä¾¿é€‰ä¸€ä¸ªå°±è¡Œã€‚åˆ«è¿½æ±‚å®Œç¾ï¼Œå…ˆæ¢å¤ã€‚",
      picks: [
        { dish:"æ¸…æ±¤ç‰›è‚‰é¢ + ç…é¸¡è›‹ + å°èœ", why:"çƒ­ + è›‹ç™½æ˜ç¡® + æ¸…æ·¡ï¼Œæ¢å¤æ„Ÿæœ€å¼ºã€‚", kw:"æ¸…æ±¤ç‰›è‚‰é¢ ç…è›‹ å°èœ" },
        { dish:"ç‰›è‚‰ç²‰ä¸æ±¤ + å¤é¸¡è›‹ + å°èœ", why:"æ›´è½¯ã€æ›´å¥½å…¥å£ï¼Œå‡ ä¹ä¸è¸©é›·ã€‚", kw:"ç‰›è‚‰ç²‰ä¸æ±¤ å¤é¸¡è›‹ å°èœ" },
        { dish:"çš®è›‹ç²¥ + æ²¹æ¡ + å°èœ", why:"æåº¦ç–²æƒ«å…œåº•ï¼šæ¶ˆåŒ–å‹åŠ›æœ€ä½ã€‚", kw:"çš®è›‹ç˜¦è‚‰ç²¥ æ²¹æ¡ å°èœ" },
      ]
    },
    sad: {
      title: "â˜¹ï¸ å¿ƒæƒ…ä¸å¥½",
      accent: "linear-gradient(90deg, rgba(0,0,0,.20), rgba(0,0,0,0))",
      decide: "ç°åœ¨è¿™ç§æƒ…å†µï¼Œ\næ¥ä¸€ä»½ç†Ÿæ‚‰ã€èƒ½é¡¶ä½çš„é¥­ã€‚\n\nå®ƒä¼šæŠŠæƒ…ç»ªæ…¢æ…¢æ‹‰å›æ­£å¸¸çŠ¶æ€ã€‚",
      moduleTitle: "æƒ…ç»ªç¨³ä½æ³•",
      moduleBody: "å…ˆåƒä¸¤å£å†å†³å®šè¦ä¸è¦å–æ±½æ°´ã€‚ç›®æ ‡ä¸æ˜¯çˆ½ï¼Œæ˜¯æŠŠæƒ…ç»ªæ‹‰å›â€œæ­£å¸¸çº¿â€ã€‚",
      picks: [
        { dish:"éº»å©†è±†è…ç›–é¥­ + å¯ä¹", why:"ç†Ÿæ‚‰ + è½»é‡å£ï¼Œå…ˆæ­¢è¡€ï¼Œå†å›åˆ°æ­£å¸¸ã€‚", kw:"éº»å©†è±†è… ç›–é¥­" },
        { dish:"ç‚¸é…±é¢ + é›ªç¢§", why:"å¼ºâ€œç†Ÿæ‚‰æ„Ÿâ€è·¯å¾„ï¼šç¨³å®šã€å¯é¢„æœŸã€‚", kw:"ç‚¸é…±é¢" },
        { dish:"æ–°ç–†æŠ“é¥­ + å¯ä¹", why:"é¥±è…¹æ„Ÿæœ€ç¨³ï¼Œæƒ…ç»ªæ³¢åŠ¨æ—¶æ›´â€œé¡¶å¾—ä½â€ã€‚", kw:"æ–°ç–†æŠ“é¥­" },
      ]
    },
    reward: {
      title: "ğŸ˜Œ æƒ³å¥–åŠ±è‡ªå·±",
      accent: "linear-gradient(90deg, rgba(0,0,0,.16), rgba(0,0,0,0))",
      decide: "ç°åœ¨è¿™ç§æƒ…å†µï¼Œ\nç‚¹ä¸€ä»½æœ€â€œå€¼å¾—â€çš„ä¸œè¥¿ã€‚\n\nè¿™æ˜¯ä½ ä¸»åŠ¨é€‰æ‹©çš„ä¸€é¡¿ã€‚",
      moduleTitle: "ä»ªå¼æ„Ÿï¼ˆå¯é€‰ï¼‰",
      moduleBody: "åˆ«è¾¹èµ°è¾¹åƒï¼šåä¸‹ã€æ‰“å¼€ä¸€é¦–å–œæ¬¢çš„æ­Œï¼ŒæŠŠè¿™ä¸€é¡¿åƒå®Œã€‚",
      picks: [
        { dish:"ç‰›è‚‰èŠå£«æ±‰å ¡ + é¸¡è…¿ + å¯ä¹", why:"å¼ºæ»¡è¶³æ„Ÿï¼šåƒå®Œä¼šè¯´â€œçˆ½äº†â€ã€‚", kw:"ç‰›è‚‰ èŠå£« æ±‰å ¡ é¸¡è…¿" },
        { dish:"è¿‡æ²¹è‚‰æ‹Œé¢ + ç…è›‹ + å¯ä¹", why:"é‡å£ + è´¨æ„Ÿï¼šæ›´åƒâ€œå¥–åŠ±â€ã€‚", kw:"è¿‡æ²¹è‚‰ æ‹Œé¢ ç…è›‹" },
        { dish:"æŠ«è¨ / å¯¿å¸ï¼ˆäºŒé€‰ä¸€ï¼‰", why:"æŠ«è¨=åº†ç¥å‹ï¼›å¯¿å¸=å“è´¨å‹ï¼ˆçœ‹ä½ å½“ä¸‹æƒ³è¦å“ªç§â€œå€¼â€ï¼‰ã€‚", kw:"æŠ«è¨ å¯¿å¸" },
      ]
    },
    rush: {
      title: "ğŸ•™ èµ¶æ—¶é—´",
      accent: "linear-gradient(90deg, rgba(0,0,0,.24), rgba(0,0,0,0))",
      decide: "ç°åœ¨æœ€é‡è¦çš„æ˜¯å¿«å’Œç¡®å®šã€‚\n\næŠŠè¿™é¡¿é¥­å½“ä½œæ¸…æ‰ä¸€ä»¶å¾…åŠã€‚",
      moduleTitle: "æœ€çŸ­è·¯å¾„",
      moduleBody: "æ‰“å¼€å¤–å–åï¼Œä¼˜å…ˆé€‰ã€Œé¢„è®¡é€è¾¾æœ€çŸ­ã€çš„é‚£å®¶ï¼Œä¸è¦èµŒç½‘çº¢çˆ†æ¬¾ã€‚",
      picks: [
        { dish:"Subway é¦™çƒ¤ç‰›è‚‰ä¸‰æ˜æ²» + é›ªç¢§", why:"ä¸è¿›å¨æˆ¿è·¯å¾„ï¼šæ—¶é—´æœ€å¯æ§ã€‚", kw:"Subway é¦™çƒ¤ç‰›è‚‰ ä¸‰æ˜æ²»" },
        { dish:"é¸¡è‚‰å· + å¯ä¹", why:"æ‰‹æŒ + æ‰“åŒ…å¿«ï¼šè¡ŒåŠ¨ä¸ä¸­æ–­ã€‚", kw:"é¸¡è‚‰å·" },
        { dish:"é’æ¤’é¸¡è›‹ç›–é¥­", why:"å¨æˆ¿æ¨¡æ¿ï¼šå‡ºé¤ç¨³å®šï¼Œæœ€å°‘å˜é‡ã€‚", kw:"é’æ¤’é¸¡è›‹ ç›–é¥­" },
      ]
    },
    decide: {
      title: "ğŸ¤” ä½ æ¥å†³å®š",
      accent: "linear-gradient(90deg, rgba(0,0,0,.14), rgba(0,0,0,0))",
      decide: "ç°åœ¨è¿™ç§æƒ…å†µï¼Œ\næ¥ä»½æ¸…æ·¡ä½†å®Œæ•´çš„ä¸€é¤ã€‚\n\nä¸åï¼Œä¸åˆºæ¿€ï¼Œ\nä¹Ÿä¸ä¼šè®©äº‹æƒ…å˜å¾—æ›´ç³Ÿã€‚",
      moduleTitle: "æˆ‘ä¸ºä»€ä¹ˆè¿™ä¹ˆé€‰",
      moduleBody: "æŒ‰æ—¶é—´æ®µèµ°â€œåæ‚”ç‡æœ€ä½â€çš„é‚£æ¡è·¯ï¼šç™½å¤©åæ•ˆç‡ï¼Œä¸‹åˆæ™šä¸Šåæ¢å¤ï¼Œæ·±å¤œåç¨³æƒ…ç»ªã€‚"
    }
  };

  function timeBucket(){
    const h = new Date().getHours();
    if (h >= 7 && h < 14) return "rush";
    if (h >= 14 && h < 21) return "tired";
    return "sad";
  }

  function picksFor(stateKey){
    if(stateKey !== "decide") return DATA[stateKey].picks;
    const bucket = timeBucket();
    const b = DATA[bucket].picks;
    return [
      { dish: b[0].dish, why: `æŒ‰å½“å‰æ—¶é—´ï¼šèµ°ã€Œ${DATA[bucket].title}ã€å…¬å¼ï¼ˆæœ€ä¸å®¹æ˜“åæ‚”ï¼‰ã€‚`, kw: b[0].kw },
      { dish: DATA.tired.picks[1].dish, why: "åæ¢å¤ï¼šæ›´ç¨³ã€æ›´å®¹æ˜“åƒä¸‹å»ã€‚", kw: DATA.tired.picks[1].kw },
      { dish: DATA.rush.picks[0].dish, why: "åæ•ˆç‡ï¼šæœ€å¿«æ‹¿åˆ°ã€æœ€å°‘å˜é‡ã€‚", kw: DATA.rush.picks[0].kw },
    ];
  }

  const homeEl = document.getElementById('home');
  const resEl  = document.getElementById('result');
  const stickyBar = document.getElementById('stickyBar');

  const accentBar  = document.getElementById('accentBar');
  const stateTitle = document.getElementById('stateTitle');
  const decideText = document.getElementById('decideText');
  const pickText   = document.getElementById('pickText');
  const pickMeta   = document.getElementById('pickMeta');

  const moduleTitle = document.getElementById('moduleTitle');
  const moduleBody  = document.getElementById('moduleBody');

  const homeBtn = document.getElementById('homeBtn');
  const goBtn   = document.getElementById('goBtn');
  const swapBtn = document.getElementById('swapBtn');
  const againBtn= document.getElementById('againBtn');

  let currentState = null;
  let idx = 0;

  function showHome(){
    resEl.style.display  = "none";
    stickyBar.style.display = "none";
    homeEl.style.display = "block";
    currentState = null;
    idx = 0;

    // reset any dimming
    document.querySelectorAll('.stateBtn').forEach(b => b.classList.remove('dimmed'));
  }

  function animateSwap(){
    // small â€œsoftâ€ transition on pick change
    pickText.style.opacity = 0;
    pickMeta.style.opacity = 0;
    setTimeout(()=>{
      pickText.style.opacity = 1;
      pickMeta.style.opacity = 1;
    }, 90);
  }

  function render(stateKey, chosenBtn){
    currentState = stateKey;
    idx = 0;

    const S = DATA[stateKey];
    const picks = picksFor(stateKey);

    // dim others a bit right when you choose (feels â€œaliveâ€)
    document.querySelectorAll('.stateBtn').forEach(b=>{
      if(chosenBtn && b !== chosenBtn) b.classList.add('dimmed');
    });

    accentBar.style.background = S.accent || "linear-gradient(90deg, rgba(0,0,0,.14), rgba(0,0,0,0))";
    stateTitle.textContent = S.title;
    decideText.textContent = S.decide;

    pickText.textContent = picks[idx].dish;
    pickMeta.textContent = picks[idx].why;

    moduleTitle.textContent = S.moduleTitle || "";
    moduleBody.textContent  = S.moduleBody || "";

    homeEl.style.display = "none";
    resEl.style.display  = "block";
    stickyBar.style.display = "block";
    animateSwap();
    window.scrollTo({top:0, behavior:"smooth"});
  }

  function swap(){
    const picks = picksFor(currentState);
    idx = (idx + 1) % picks.length;
    pickText.textContent = picks[idx].dish;
    pickMeta.textContent = picks[idx].why;
    animateSwap();
  }

  // âœ… ä¿ç•™â€œå°è¯•å”¤é†’ç¾å›¢ App + å¤±è´¥å›é€€ç½‘é¡µæœç´¢â€
  function go(){
    const picks = picksFor(currentState);
    const kw = picks[idx].kw || picks[idx].dish;

    const appUrl = "meituanwaimai://waimai.meituan.com/search?query=" + encodeURIComponent(kw);
    const webUrl = "https://waimai.meituan.com/search?keyword=" + encodeURIComponent(kw);

    const start = Date.now();
    window.location.href = appUrl;

    setTimeout(() => {
      if (Date.now() - start < 1400) {
        window.open(webUrl, "_blank");
      }
    }, 900);
  }

  document.querySelectorAll('.stateBtn').forEach(b=>{
    b.addEventListener('click', ()=>render(b.dataset.state, b));
  });

  homeBtn.addEventListener('click', showHome);
  againBtn.addEventListener('click', showHome);
  swapBtn.addEventListener('click', swap);
  goBtn.addEventListener('click', go);
</script>
</body>
</html>
